# 0307 업데이트

- 집에서 잔업한 덕분에 금요일까지의 이미지 크롤링, 정제 목표치는 목요일 오늘 완료
- 꽃 이미지 절반을 완료한 것이므로, 주말동안 크롤링을 돌려서 일을 단축하기로 결정

- 오늘의 주요 화두는 전문가 멘토링
-> 포트폴리오로 가져가기 위해선 빅데이터를 다루어봤다는 경험이 필요할 것으로 보임
-> 업무량이 많아지고 라벨링 업무가 모두 해야하기 때문에 팀원들의 반대로 무산
-> 내 포트폴리오를 위해 해당 기능을 가져가기 위해선 혼자서 몇밤 정도 새서 작업 해야할듯

전문가 교수님이 제안해주신 추천 시스템 도입 방법
- 실제 꽃집들이 올리는 꽃 이미지를 크롤링 한 뒤, 꽃 이미지를 생성하는 과정 대신에 특정 꽃을 찾아주는 꽃집을 찾아주는 서비스로 변경해본다
- MLP를 이용해서 꽃말 추천 모델을 직접 제작해본다. (비정형 문장 - 꽃말 매칭 데이터를 정제하는 과정이 필요해짐)
- 꽃 추천에 있어서 협업 시스템을 이용해 개인에 맞는 추천을 도입해본다.

멘토링 후 내가 생각해본 방법
- 인터넷에서 꽃다발 이미지들을 긁은 후, 꽃다발을 구성하는 꽃들의 집합들을 라벨링 한뒤, 이를 기반으로 꽃말로 구성된 1번, 2번 꽃과 어울리는 3번 꽃을 콘텐츠 추천으로 제공한다. 
(인터넷에서 구할 수 있는 꽃다발 이미지들을 통해 현재 선택된 꽃과 어울리는 꽃을 알아낸다)

# 크롤러 트러블 슈팅

## 셀레니움 매크로에서 아래와 같은 HTML 컴포넌트를 제대로 클릭하지 않는 문제 발생

```python
imgUrl = driver.find_element(
                By.XPATH,
                '//*[@id="Sva75c"]/div[2]/div[2]/div[2]/div[2]/c-wiz/div/div/div/div/div[3]/div[1]/a/img[1]'
            ).get_attribute("src")
```

아무런 사전 지식이 없으면 매우 헤매는 부분이지만, 매크로 크롤러를 만들어본 경험이 있기 때문에 짧은 시간 내에 해결

구글 이미지에서 제공하는 HTML DOM 형태가 바뀌면 구버전은 사용 불가능하게 바뀌는 것이기 때문에, 현재 버전에 맞게 업데이트 필요.

썸네일은 class를 사용해서 검색하고, 나머지 버튼 조작은 XPath를 사용하여 작동하는 것으로 매크로 변경

## 셀레니움의 버전 문제

셀레니움을 사용해본 결과, 버전마다 작동 방식과 인자값이 미묘하게 다름 (버전간 호환성이 구림..)

구버전은 별도로 크롬 드라이버를 받아야하지만, 중간버전은 크롬 드라이버를 제공하는 패키지와 함께 사용하며, 최신버전은 해당 패키지가 통합되어 별도 설정 없이 자동 제공됨.

크롬 브라우저를 숨겨서 실행하기 위한 옵션 객체 설정에서도, 구버전에선 chrome_option 이라는 인자가 최신버전에선 option이라는 인자로 사용됨

## 크롤러 부팅 오류

- 간헐적으로 크롤러가 시작되지 않고 강제종료됨
- 크롤러 프로세스가 크롬 브라우저 부팅을 기다지리 않아서 생기는 문제 → 인터넷에서 가져온 코드가 해당 사항은 고려하고 코딩하지 않음

→ 블로그에서 가져오는 코드는 나랑 별반 다르지 않은 사람이 끄적인 코드라는 걸 항상 명심하자

- 매크로 작동 방식을 다시 확인하며 크롬 브라우저의 작동과 인터넷 통신으로 인해 텀이 필요한 모든 순간에 sleep 함수로 대기 시간을 주니 해결됨
